import{pipeline as f}from"https://cdn.jsdelivr.net/npm/@xenova/transformers@2.8.0";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function d(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(e){if(e.ep)return;e.ep=!0;const t=d(e);fetch(e.href,t)}})();const r=document.getElementById("status"),g=document.getElementById("image"),m=document.getElementById("detect-objects"),p=document.getElementById("image-container");r.textContent="Loading model...";const b=await f("object-detection","Xenova/yolos-tiny");m.addEventListener("click",y);m.disabled=!1;r.textContent="Ready";async function y(){r.textContent="Detecting...";const c=await b(g.src,{threshold:.95,percentage:!0});r.textContent="Drawing...",c.forEach(o=>{h(o)}),r.textContent="Done!"}function h(c){const{label:o,score:d,box:s}=c,{xmax:e,xmin:t,ymax:n,ymin:l}=s,u="#"+Math.floor(Math.random()*16777215).toString(16).padStart(6,0),i=document.createElement("div");i.className="bounding-box",Object.assign(i.style,{borderColor:u,left:100*t+"%",top:100*l+"%",width:100*(e-t)+"%",height:100*(n-l)+"%"});const a=document.createElement("span");a.textContent=`${o}: ${Math.floor(d*100)}%`,a.className="bounding-box-label",a.style.backgroundColor=u,i.appendChild(a),p.appendChild(i)}
